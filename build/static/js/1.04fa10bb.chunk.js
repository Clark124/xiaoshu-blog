webpackJsonp([1],{366:function(e,t,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=a.n(o),l=a(9),c=a(376),u=(a.n(c),function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}()),p=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={username:"",password:"",email:"",repeatPassword:"",showErrorMessage:!1,errorMessage:""},a}return n(t,e),u(t,[{key:"isEmai",value:function(e){return/^\w+@\w+\.\w+$/.test(e)}},{key:"isValidUsername",value:function(e){return/^[0-9a-zA-Z\u0391-\uFFE5]{3,10}$/.test(e)}},{key:"isValidPassword",value:function(e){return/\w{6,15}/.test(e)}},{key:"checkUsername",value:function(){this.isValidUsername(this.state.username)?this.setState({showErrorMessage:!1}):this.setState({errorMessage:"\u8bf7\u8f93\u5165\u6b63\u786e\u4eba\u7528\u6237\u540d,\u5fc5\u987b3\u4f4d\u4ee5\u4e0a",showErrorMessage:!0,username:""})}},{key:"checkPassword",value:function(){this.isValidPassword(this.state.password)?this.setState({showErrorMessage:!1}):this.setState({errorMessage:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801\uff0c\u5fc5\u987b6\u4f4d\u4ee5\u4e0a",showErrorMessage:!0,password:""})}},{key:"checkRepeatPassword",value:function(){this.state.password!==this.state.repeatPassword&&this.setState({errorMessage:"\u5bc6\u7801\u4e0d\u4e00\u81f4",showErrorMessage:!0,repeatPassword:""})}},{key:"checkEmail",value:function(){this.isEmai(this.state.email)?this.setState({showErrorMessage:!1}):this.setState({errorMessage:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1",showErrorMessage:!0,email:""})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeRepeatPassword",value:function(e){this.setState({repeatPassword:e.target.value})}},{key:"makeUserId",value:function(e){for(var t="",a=0;a<e;a++)t+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return t}},{key:"handleOnSubmit",value:function(){var e=this,t=this.state,a=t.username,s=t.password,r=t.repeatPassword;return""===t.email?void alert("\u5fc5\u987b\u586b\u5199\u90ae\u7bb1"):""===a?void alert("\u5fc5\u987b\u586b\u5199\u7528\u6237\u540d"):""===s?void alert("\u5fc5\u987b\u586b\u5199\u5bc6\u7801"):""===r?void alert("\u5fc5\u987b\u586b\u5199\u5bc6\u7801\u786e\u8ba4"):void fetch("/regist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password,email:this.state.email,userId:this.makeUserId(10)})}).then(function(t){if(200!==t.status)throw new Error("Fail to get response with status"+t.status);t.json().then(function(t){200===t.status?(localStorage.setItem("userinfo",JSON.stringify(t.data)),window.location="/"):201===t.status&&e.setState({errorMessage:t.message,showErrorMessage:!0})}).catch(function(t){e.setState({errorMessage:t,showErrorMessage:!0})})}).catch(function(t){e.setState({errorMessage:t,showErrorMessage:!0})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"signUp"},i.a.createElement(l.d,{to:"/"},i.a.createElement("div",{className:"logo"},"\u5c0f\u4e66")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-4"}),i.a.createElement("div",{className:"col-md-4 form-wrapper"},i.a.createElement("div",{className:"title"},i.a.createElement(l.d,{className:"sign-up",to:"/sign_up"},"\u6ce8\u518c"),i.a.createElement(l.d,{to:"/sign_in"},"\u767b\u5f55")),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"\u7528\u6237\u540d"),i.a.createElement("input",{type:"text",className:"form-control",id:"username",placeholder:"\u7528\u6237\u540d",value:this.state.username,onBlur:this.checkUsername.bind(this),onChange:this.handleChangeUsername.bind(this)})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"\u5bc6\u7801"),i.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"\u5bc6\u7801",value:this.state.password,onBlur:this.checkPassword.bind(this),onChange:this.handleChangePassword.bind(this)})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"\u786e\u8ba4\u5bc6\u7801"),i.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801",value:this.state.repeatPassword,onChange:this.handleChangeRepeatPassword.bind(this),onBlur:this.checkRepeatPassword.bind(this)})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"\u90ae\u7bb1"),i.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"\u90ae\u7bb1",value:this.state.email,onBlur:this.checkEmail.bind(this),onChange:this.handleChangeEmail.bind(this)})),i.a.createElement("div",{className:"checkbox"},i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox"})," \u6211\u9075\u5b88\u6ce8\u518c\u89c4\u5b9a")),i.a.createElement("div",{className:"btn-submit"},i.a.createElement("button",{type:"submit",id:"signup",className:"btn btn-primary",onClick:this.handleOnSubmit.bind(this)},"\u6ce8\u518c")),this.state.showErrorMessage?i.a.createElement("div",{id:"errmsg",className:"alert alert-danger ",role:"alert"},this.state.errorMessage):"")))}}]),t}(o.Component);t.default=p},372:function(e,t,a){t=e.exports=a(361)(!0),t.push([e.i,".signUp{position:relative;height:100%;min-height:750px;background-color:#f1f1f1}.signUp .logo{position:absolute;font-weight:bolder;font-size:50px;left:10%;top:10%}.form-wrapper{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border:1px solid #ccc;border-radius:5px;padding:20px;background:#fff;-webkit-box-shadow:0 0 8px rgba(0,0,0,.1);box-shadow:0 0 8px rgba(0,0,0,.1)}.signUp .title{display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.signUp .title a{font-size:20px;font-weight:700}.signUp .title .sign-up{padding-bottom:5px;border-bottom:3px solid orange}.btn-submit{margin-bottom:20px}","",{version:3,sources:["D:/react-express/src/SignUp/css/signup.css"],names:[],mappings:"AACA,QACI,kBAAmB,AACnB,YAAa,AACb,iBAAkB,AAClB,wBAA0B,CAC7B,AACD,cACI,kBAAmB,AACnB,mBAAoB,AACpB,eAAgB,AAChB,SAAU,AACV,OAAS,CACZ,AACD,cACI,kBAAmB,AACnB,SAAU,AACV,QAAS,AACT,uCAAwC,AACpC,mCAAoC,AAChC,+BAAgC,AACxC,sBAAuB,AACvB,kBAAmB,AACnB,aAAc,AACd,gBAAiB,AACjB,0CAA2C,AACnC,iCAAmC,CAC9C,AAED,eACI,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,4BAA8B,CACrC,AACD,iBACI,eAAgB,AAChB,eAAkB,CACrB,AACD,wBACI,mBAAoB,AACpB,8BAA+B,CAClC,AACD,YACI,kBAAoB,CACvB",file:"signup.css",sourcesContent:["\r\n.signUp{\r\n    position: relative;\r\n    height: 100%;\r\n    min-height: 750px;\r\n    background-color: #f1f1f1;\r\n}\r\n.signUp .logo{\r\n    position: absolute;\r\n    font-weight: bolder;\r\n    font-size: 50px;\r\n    left: 10%;\r\n    top: 10%;\r\n}\r\n.form-wrapper{\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    -webkit-transform: translate(-50%,-50%);\r\n        -ms-transform: translate(-50%,-50%);\r\n            transform: translate(-50%,-50%);\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n    padding: 20px;\r\n    background: #fff;\r\n    -webkit-box-shadow: 0 0 8px rgba(0,0,0,.1);\r\n            box-shadow: 0 0 8px rgba(0,0,0,.1);\r\n}\r\n\r\n.signUp .title{\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-pack: distribute;\r\n        justify-content: space-around;\r\n}\r\n.signUp .title a{\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n}\r\n.signUp .title .sign-up{\r\n    padding-bottom: 5px;\r\n    border-bottom: 3px solid orange\r\n}\r\n.btn-submit{\r\n    margin-bottom: 20px;\r\n}\r\n"],sourceRoot:""}])},376:function(e,t,a){var s=a(372);"string"===typeof s&&(s=[[e.i,s,""]]);var r={};r.transform=void 0;a(362)(s,r);s.locals&&(e.exports=s.locals)}});
//# sourceMappingURL=1.04fa10bb.chunk.js.map